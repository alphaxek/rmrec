"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.resolveCompilerOptions = void 0;
const path_1 = require("path");
const ts = require("@tsd/typescript");
const TsdError_1 = require("./TsdError");
function resolveCompilerOptions(searchPath) {
    const configPath = ts.findConfigFile(searchPath, ts.sys.fileExists);
    if (configPath === undefined) {
        return;
    }
    const sourceFile = ts.readJsonConfigFile(configPath, ts.sys.readFile);
    const { options: compilerOptions, errors: configDiagnostics } = ts.parseJsonSourceFileConfigFileContent(sourceFile, ts.sys, (0, path_1.dirname)(configPath), undefined, configPath);
    if (configDiagnostics.length > 0) {
        throw new TsdError_1.TsdError(configDiagnostics[0], "ConfigError");
    }
    return compilerOptions;
}
exports.resolveCompilerOptions = resolveCompilerOptions;
